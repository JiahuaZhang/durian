# Fly.io setup

```shell
fly apps create durian-invest

automatically selected personal organization: Jiahua Zhang
New app created: durian-invest
```

```shell
fly secrets set ALPACA_SECRET_KEY={your-alpaca-secret-key}
Secrets are staged for the first deployment
```

```shell
fly deploy
==> Verifying app config
Validating C:\Users\大声\Documents\explore\durian-invest\fly.toml
WARNING: Service must expose at least one port. Add a [[services.ports]] section to fly.toml; Check docs at https://fly.io/docs/reference/configuration/#services-ports
 Validation for _services without ports_ will hard fail after February 15, 2024.✓ Configuration is valid
--> Verified app config
==> Building image
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...    
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...    
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...    
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...    
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...    
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...    
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...
Waiting for depot builder...    
Waiting for depot builder...
Waiting for depot builder...
==> Building image with Depot   
--> build:  (​)
[+] Building 24.2s (14/14) FINISHED
 => [internal] load build definition from Dockerfile                                                                                                                                       0.1s
 => => transferring dockerfile: 519B                                                                                                                                                       0.1s 
 => [internal] load metadata for ghcr.io/astral-sh/uv:latest                                                                                                                               0.9s 
 => [internal] load metadata for docker.io/library/python:3.11-slim                                                                                                                        1.0s 
 => [internal] load .dockerignore                                                                                                                                                          0.0s
 => => transferring context: 2B                                                                                                                                                            0.0s 
 => [stage-0 1/7] FROM docker.io/library/python:3.11-slim@sha256:158caf0e080e2cd74ef2879ed3c4e697792ee65251c8208b7afb56683c32ea6c                                                          2.9s 
 => => resolve docker.io/library/python:3.11-slim@sha256:158caf0e080e2cd74ef2879ed3c4e697792ee65251c8208b7afb56683c32ea6c                                                                  0.0s 
 => => sha256:3f0cdbca744e7bd0ce0ff6da73b9148829b04309925992954a314ba203f56e99 249B / 249B                                                                                                 0.1s 
 => => sha256:72cf4c3b83019e176aba979aba419d35f56576bbcfc4f7249a1ab1d4b536730b 1.29MB / 1.29MB                                                                                             0.1s 
 => => sha256:4d55cfecf3663813d03c369bcd532b89f41cf07b65d95887ef686538370a747c 14.36MB / 14.36MB                                                                                           0.2s 
 => => sha256:1733a4cd59540b3470ff7a90963bcdea5b543279dd6bdaf022d7883fdad221e5 29.78MB / 29.78MB                                                                                           0.4s 
 => => extracting sha256:1733a4cd59540b3470ff7a90963bcdea5b543279dd6bdaf022d7883fdad221e5                                                                                                  1.3s
 => => extracting sha256:72cf4c3b83019e176aba979aba419d35f56576bbcfc4f7249a1ab1d4b536730b                                                                                                  0.2s
 => => extracting sha256:4d55cfecf3663813d03c369bcd532b89f41cf07b65d95887ef686538370a747c                                                                                                  0.9s
 => => extracting sha256:3f0cdbca744e7bd0ce0ff6da73b9148829b04309925992954a314ba203f56e99                                                                                                  0.0s
 => [internal] load build context                                                                                                                                                          0.1s 
 => => transferring context: 15.45kB                                                                                                                                                       0.1s 
 => FROM ghcr.io/astral-sh/uv:latest@sha256:5713fa8217f92b80223bc83aac7db36ec80a84437dbc0d04bbc659cae030d8c9                                                                               1.6s
 => => resolve ghcr.io/astral-sh/uv:latest@sha256:5713fa8217f92b80223bc83aac7db36ec80a84437dbc0d04bbc659cae030d8c9                                                                         0.0s 
 => => sha256:e86505f30ef05f36c69e0985da307f42fe44441ffdc33f21e4f481551d8b5f73 98B / 98B                                                                                                   0.3s 
 => => sha256:55e2e50d1bef3647993e7538ff11dfc5fade79d1bb96dafc39a82b4ec51deefd 22.45MB / 22.45MB                                                                                           1.1s 
 => => extracting sha256:55e2e50d1bef3647993e7538ff11dfc5fade79d1bb96dafc39a82b4ec51deefd                                                                                                  0.5s 
 => => extracting sha256:e86505f30ef05f36c69e0985da307f42fe44441ffdc33f21e4f481551d8b5f73                                                                                                  0.0s 
 => [stage-0 2/7] WORKDIR /app                                                                                                                                                             2.6s 
 => [stage-0 3/7] COPY --from=ghcr.io/astral-sh/uv:latest /uv /usr/local/bin/uv                                                                                                            0.7s 
 => [stage-0 4/7] COPY pyproject.toml .                                                                                                                                                    0.0s 
 => [stage-0 5/7] RUN uv pip install --system --no-cache alpaca-py python-dotenv                                                                                                           7.0s 
 => [stage-0 6/7] COPY bot.py .                                                                                                                                                            0.1s 
 => [stage-0 7/7] COPY strategy.py .                                                                                                                                                       0.0s 
 => exporting to image                                                                                                                                                                     7.0s 
 => => exporting layers                                                                                                                                                                    5.9s 
 => => exporting manifest sha256:9e8bcbe53301a979435d1f0a001162a6b95ca765ba68f882e9248e763bfd7b73                                                                                          0.0s 
 => => exporting config sha256:eeb54054f078ea03d46fca7639c689f753dc0c27a663bc179ae4a803d23bc2c7                                                                                            0.0s 
 => => pushing layers for registry.fly.io/durian-invest:deployment-01KCMJZ7T7Y56TGP378VBHB5J6@sha256:9e8bcbe53301a979435d1f0a001162a6b95ca765ba68f882e9248e763bfd7b73                      0.9s 
 => => pushing layer sha256:eeb54054f078ea03d46fca7639c689f753dc0c27a663bc179ae4a803d23bc2c7                                                                                               0.3s 
 => => pushing layer sha256:dad64cdc174f61f86511bbdd6232c8e00cd6ecc361992db9b63f504593c2c9be                                                                                               0.3s 
 => => pushing layer sha256:145619ef442cd80bf4ac9de2be5d50d21def65eba687b256eb859f36dad09997                                                                                               0.9s 
 => => pushing layer sha256:5ca9bd609f670eb253efd1010567285559b9519266e7d5afc1030f0e98237649                                                                                               0.4s 
 => => pushing layer sha256:4cb33eecbe58d23cac5ed6b33a7ad164ce667fb56c425e3413149e0ebd25405b                                                                                               0.1s 
 => => pushing layer sha256:4db4950f314df22a4f15edbdb9e18b427cb4ca6938381cd841f2e85aa0f58aad                                                                                               0.7s 
 => => pushing layer sha256:fa5c11d504d0bc80a154c196d15edd56fce63df65df2912e925612a8caabbaff                                                                                               0.1s 
 => => pushing layer sha256:f39b152b717c3623002ad11a03b21a2e914ab3197e69a1b6aeb640dca35b2ec4                                                                                               0.1s 
 => => pushing layer sha256:755f7186832ef1215d5dd40cf12e9c8a4391d915c9092ad39d1af36e7da1f6c1                                                                                               0.1s 
 => => pushing layer sha256:5e00a0cd436dc200eeaa32b382d51ec0c16727896396709e17bdbc5b01abae4a                                                                                               0.4s 
 => => pushing layer sha256:db5824b02853ad5833b537c112f0df238959c48f36e36972e9e60bae5d9c3b53                                                                                               0.4s 
 => => pushing manifest for registry.fly.io/durian-invest:deployment-01KCMJZ7T7Y56TGP378VBHB5J6@sha256:9e8bcbe53301a979435d1f0a001162a6b95ca765ba68f882e9248e763bfd7b73                    0.1s 
--> Build Summary:  (​)
--> Building image done
image: registry.fly.io/durian-invest:deployment-01KCMJZ7T7Y56TGP378VBHB5J6
image size: 84 MB

Watch your deployment at https://fly.io/apps/durian-invest/monitoring

Provisioning ips for durian-invest
  Dedicated ipv6: 2a09:8280:1::bb:8c76:0
  Shared ipv4: 66.241.125.107
  Add a dedicated ipv4 with: fly ips allocate-v4

This deployment will:
 * create 2 "app" machines

No machines in group app, launching a new machine

WARNING The app is not listening on the expected address and will not be reachable by fly-proxy.
You can fix this by configuring your app to listen on the following addresses:
  - 0.0.0.0:8080
Found these processes inside the machine with open listening sockets:
  PROCESS        | ADDRESSES
-----------------*--------------------------------------
  /.fly/hallpass | [fdaa:0:53e2:a7b:574:3c4d:2b5:2]:22

Creating a second machine for high availability and zero downtime deployments.
To disable this, set "min_machines_running = 0" in your fly.toml.
Finished launching new machines
-------
 ✔ Machine 080e6eea7203e8 [app] update finished: success
-------
```